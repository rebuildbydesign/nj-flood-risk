<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>NJ Flood Risk = Financial Risk</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">

  <!-- MAPBOX GL JS v3.3.0 -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>

  <!-- MAPBOX GEOCODER v5.0.0 -->
  <link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>

  <!-- CUSTOM BLACK GEOCODER STYLE -->
  <link rel="stylesheet" href="geocoder.css" type="text/css" />

  <!-- CUSTOM GOOGLE FONT (Poppins, AOA style) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap"
    rel="stylesheet">

  <!-- FONT AWESOME ICONS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

  <!-- YOUR MAIN STYLESHEET -->
  <link rel="stylesheet" href="styles.css">
</head>



<body>
  <div id="loading">Loading map...</div>

  <div id="map"></div>

  <div class="info-box">
    <h1>NEW JERSEY: FLOOD RISK = FINANCIAL RISK</h1>
    <p>
      Rebuild by Design analyzed 3.4 million properties statewide, including residential, commercial, and industrial parcels, to reflect the full scope of New Jersey’s exposure. Each parcel is classified into one of four displacement risk groups, showing who is most likely to relocate, and where they are likely to move.
    </p>
    <div class="risk-buttons">
      <button id="toggle-risk-groups" class="toggle-all active" style="background:#222; color: #fff; border: 1px solid #888;">SHOW ALL</button>
      <button data-group="Crisis" style="background:#dd4000">CRISIS</button>
      <button data-group="Emigrating" style="background:#f27407">EMIGRATING</button>
      <button data-group="Destination" style="background:#f2a007">DESTINATION</button>
      <button data-group="Stable" style="background:#f7c320">STABLE</button>
    </div>
    <br />
  
  
    <div class="asset-toggles">
      <label><input type="checkbox" id="toggle-floodplain" checked> 2050 Flood Risk</label>
</div>

  
  </div>
  

  <!-- LEGEND -->
  <div id="legend">
    <strong>Flood Risk Legend</strong>
    <div><span class="legend-key" style="background:#dd4000"></span> CRISIS: High Flood Risk, Lower Income</div>
    <div><span class="legend-key" style="background:#f27407"></span> EMIGRATING: High Flood Risk, Higher Income</div>
    <div><span class="legend-key" style="background:#f2a007"></span> DESTINATION: Low Flood Risk, Lower Income</div>
    <div><span class="legend-key" style="background:#f7c320"></span> STABLE: Low Flood Risk, Higher Income</div>
  </div>

 <!-- HOW TO USE BANNER -->
<div id="howto-banner" class="howto-banner" tabindex="0">
  <span class="howto-short">ℹ️ Need Help?</span>
  <span class="howto-long">ℹ️ Need Help? See How This Map Works</span>
</div>


<!-- HOW TO USE MODAL -->
<div id="howto-modal" class="howto-modal hidden" tabindex="-1">
  <div class="howto-content">
    <button id="howto-close" aria-label="Close">&times;</button>
    <h2>How to Use This Map</h2>
    <ul>
      <li><b>Search an Address:</b> Use the address bar (top right) to find your location.</li>
      <li><b>Risk Group Filters:</b> Click buttons (Show All, Crisis, Emigrating, etc.) to view different displacement risk groups.</li>
      <li><b>Toggle Layers:</b> Check boxes to turn <b>2050 Flood Risk</b>, <b>Hospitals</b>, <b>Schools</b>, and <b>Parks</b> on/off.</li>
      <li><b>Zoom In:</b> For more parcel-level detail, zoom in. Some features may only appear at higher zoom levels.</li>
      <li><b>Legend:</b> See the color key for risk types in the lower right.</li>
    </ul>
    <p style="font-size:0.97em;color:#888;">For more details on data sources and methodology, visit <a href="https://rebuildbydesign.org/nj-flood-risk" target="_blank" rel="noopener">NJ Flood Risk = Financial Risk</a> report by Rebuild by Design.</p>
  </div>
</div>


  <!-- JS scripts -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.1/mapbox-gl-geocoder.min.js"></script>
  <script src="scripts.js"></script>
</body>
</html>
